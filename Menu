package menumilkteamanagement;

import java.util.*;
import java.text.SimpleDateFormat;

public class MenuMilkTeaManagement {
    private static final Scanner sc = new Scanner(System.in);
    private static final List<Ingredient> ingredientList = new ArrayList<>();
    private static final List<Beverage> beverageList = new ArrayList<>();

    public static void main(String[] args) {
        runMenu();
    }

    // ===== MENU CH√çNH =====
    public static void runMenu() {
        int choice;
        do {
            System.out.println("========== MENU QU·∫¢N L√ù TR√Ä S·ªÆA ==========");
            System.out.println("1. Qu·∫£n l√Ω Nguy√™n li·ªáu");
            System.out.println("2. Qu·∫£n l√Ω ƒê·ªì u·ªëng");
            System.out.println("0. Tho√°t ch∆∞∆°ng tr√¨nh");
            System.out.print("Nh·∫≠p l·ª±a ch·ªçn: ");
            choice = Integer.parseInt(sc.nextLine());

            switch (choice) {
                case 1:
                    handleIngredientMenu();
                    break;
                case 2:
                    handleBeverageMenu();
                    break;
                case 0:
                    System.out.println("Tho√°t ch∆∞∆°ng tr√¨nh. T·∫°m bi·ªát!");
                    break;
                default:
                    System.out.println("‚ùå L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá!");
                    break;
            }
        } while (choice != 0);
    }

    // ===== MENU NGUY√äN LI·ªÜU =====
    private static void handleIngredientMenu() {
        int choice;
        do {
            System.out.println("\n--- QU·∫¢N L√ù NGUY√äN LI·ªÜU ---");
            System.out.println("1. Th√™m nguy√™n li·ªáu m·ªõi");
            System.out.println("2. Xem danh s√°ch nguy√™n li·ªáu");
            System.out.println("0. Quay l·∫°i menu ch√≠nh");
            System.out.print("Nh·∫≠p l·ª±a ch·ªçn: ");
            choice = Integer.parseInt(sc.nextLine());

            switch (choice) {
                case 1:
                    addIngredient();
                    break;
                case 2:
                    showIngredients();
                    break;
                case 0:
                    System.out.println("Quay l·∫°i menu ch√≠nh...");
                    break;
                default:
                    System.out.println("‚ùå L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá!");
                    break;
            }
        } while (choice != 0);
    }

    // ===== MENU ƒê·ªí U·ªêNG =====
    private static void handleBeverageMenu() {
        int choice;
        do {
            System.out.println("\n--- QU·∫¢N L√ù ƒê·ªí U·ªêNG ---");
            System.out.println("1. Th√™m ƒë·ªì u·ªëng m·ªõi");
            System.out.println("2. Xem danh s√°ch ƒë·ªì u·ªëng");
            System.out.println("0. Quay l·∫°i menu ch√≠nh");
            System.out.print("Nh·∫≠p l·ª±a ch·ªçn: ");
            choice = Integer.parseInt(sc.nextLine());

            switch (choice) {
                case 1:
                    addBeverage();
                    break;
                case 2:
                    showBeverages();
                    break;
                case 0:
                    System.out.println("Quay l·∫°i menu ch√≠nh...");
                    break;
                default:
                    System.out.println("‚ùå L·ª±a ch·ªçn kh√¥ng h·ª£p l·ªá!");
                    break;
            }
        } while (choice != 0);
    }

    // ===== CH·ª®C NƒÇNG CHO MENU NGUY√äN LI·ªÜU =====
    private static void addIngredient() {
        try {
            System.out.print("Nh·∫≠p ID nguy√™n li·ªáu: ");
            String id = sc.nextLine();
            System.out.print("T√™n nguy√™n li·ªáu: ");
            String name = sc.nextLine();
            System.out.print("S·ªë l∆∞·ª£ng (kg): ");
            double qty = Double.parseDouble(sc.nextLine());
            System.out.print("Gi√° m·ªói kg: ");
            double cost = Double.parseDouble(sc.nextLine());

            System.out.print("Ng√†y nh·∫≠p (dd/MM/yyyy): ");
            Date purchaseDate = new SimpleDateFormat("dd/MM/yyyy").parse(sc.nextLine());
            System.out.print("H·∫°n s·ª≠ d·ª•ng (dd/MM/yyyy): ");
            Date expiryDate = new SimpleDateFormat("dd/MM/yyyy").parse(sc.nextLine());

            // üîπ Kh·ªõp v·ªõi constructor c≈© c·ªßa em
            Ingredient i = new Ingredient(qty, cost, purchaseDate, expiryDate, id, name);
            ingredientList.add(i);
            System.out.println("‚úÖ ƒê√£ th√™m nguy√™n li·ªáu: " + i.getName());
        } catch (Exception e) {
            System.out.println("‚ùå L·ªói nh·∫≠p d·ªØ li·ªáu: " + e.getMessage());
        }
    }

    private static void showIngredients() {
        System.out.println("\nDANH S√ÅCH NGUY√äN LI·ªÜU:");
        if (ingredientList.isEmpty()) {
            System.out.println("‚ö†Ô∏è Ch∆∞a c√≥ nguy√™n li·ªáu n√†o!");
        } else {
            for (Ingredient i : ingredientList) {
                System.out.println(i);
            }
        }
    }

    // ===== CH·ª®C NƒÇNG CHO MENU ƒê·ªí U·ªêNG =====
    private static void addBeverage() {
        System.out.print("Nh·∫≠p ID ƒë·ªì u·ªëng: ");
        String id = sc.nextLine();
        System.out.print("T√™n ƒë·ªì u·ªëng: ");
        String name = sc.nextLine();
        System.out.print("Gi√° b√°n: ");
        double price = Double.parseDouble(sc.nextLine());

        // üîπ Kh·ªõp v·ªõi constructor c≈© c·ªßa em: (double sellPrice, String productID, String name)
        Beverage b = new Beverage(price, id, name);
        beverageList.add(b);
        System.out.println("‚úÖ ƒê√£ th√™m ƒë·ªì u·ªëng: " + b.getName());
    }

    private static void showBeverages() {
        System.out.println("\nDANH S√ÅCH ƒê·ªí U·ªêNG:");
        if (beverageList.isEmpty()) {
            System.out.println("‚ö†Ô∏è Ch∆∞a c√≥ ƒë·ªì u·ªëng n√†o!");
        } else {
            for (Beverage b : beverageList) {
                System.out.println(b);
            }
        }
    }
}
